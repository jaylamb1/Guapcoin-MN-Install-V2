
#!/bin/bash

set -a

#Color codes
RED='\033[0;91m'
GREEN='\033[1;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

#Create arrays to hold GUAP addresses and address labels from file
declare -a MNArray
declare -a MNLabelArray

#capture the external file
filename=$1

#Clean up the file, remove bash comments and empty lines (creates a backup before removal)
sed -i".bkup" 's/^#.*$//' $filename #remove comments
sed -i '/^$/d' $filename #remove empty lines

#While loop to read in each GUAP address and corresponding label
n=0
while read label address; do
# reading each line
MNLabelArray[$n]=$label
MNArray[$n]=$address
n=$((n+1))
done < $filename

LastGuapTime='0'
LastGuapTotal='0'

for (( i = 0; i < n; i++ )); do

echo "    ${MNLabelArray[i]}:"

echo -ne "$(su -c "guapcoin-cli listmasternodes | grep -A1 \"ENABLED\" | grep -B1 \"${MNArray[i]}\"" root)\\r"
#echo -ne "Current block: $(su -c "/usr/local/bin/guapcoin-cli -conf=/root/.guapcoin$MNID/guapcoin.conf -datadir=/root/.guapcoin$MNID getblockcount" "$USER")\\r"

echo ""
echo ""
#guapcoin-cli listmasternodes | grep -A1 'ENABLED' | grep -B2 '${MNArray[i]}’

#echo -ne "Current block: $(su -c "listmasternodes | grep -A1 \"ENABLED\" | grep -B2 '\"${MNArray[i]}\"’" root)\\r"

#    if [[ su -c "guapcoin-cli listmasternodes | grep '\"${MNArray[i]}\"\|\"status\": \"ENABLED\"' > /dev/null" "root" ]]; then
#
#    echo "${MNLabelArray[i]} is ${GREEN}ENABLED${NC}"
#
#
#    else
#
#
#    su -c "guapcoin-cli listmasternodes \"${MNArray[i]}\" -A6 -B6"
#
#
#    fi+

done
